import{a as n,j as e,H as J}from"./app-D5iGuCwC.js";import{A as K}from"./auth-simple-layout-4z2NoQmI.js";import{B as h}from"./button-D7wWm94x.js";import{C as f,a as b,b as y,c as N,d as g,A as d,e as c}from"./alert-B_w5pb18.js";import{I as E}from"./input-NLRwmVJh.js";import{L as C}from"./label-DwTmQvvU.js";/* empty css            */import"./index-hHY3XkoV.js";import"./index-C64FNz03.js";const m=[{id:1,text:"Torpe o entumecido"},{id:2,text:"Acalorado"},{id:3,text:"Con temblor en las piernas"},{id:4,text:"Incapaz de relajarse"},{id:5,text:"Con temor a que ocurra lo peor"},{id:6,text:"Mareado, o que se le va la cabeza"},{id:7,text:"Con latidos del corazón fuertes y acelerados"},{id:8,text:"Inestable"},{id:9,text:"Atemorizado o asustado"},{id:10,text:"Nervioso"},{id:11,text:"Con sensación de bloqueo"},{id:12,text:"Con temblores en las manos"},{id:13,text:"Inquieto, inseguro"},{id:14,text:"Con miedo a perder el control"},{id:15,text:"Con sensación de ahogo"},{id:16,text:"Con temor a morir"},{id:17,text:"Con miedo"},{id:18,text:"Con problemas digestivos (ej: dolor de estómago, náuseas, malestar estomacal)"},{id:19,text:"Con desvanecimientos"},{id:20,text:"Con rubor facial (sonrojado)"},{id:21,text:"Con sudores, fríos o calientes"}],Q=[{value:0,label:"En absoluto"},{value:1,label:"Levemente (no me molesta mucho)"},{value:2,label:"Moderadamente (es desagradable pero puedo soportarlo)"},{value:3,label:"Gravemente (casi no podía soportarlo)"}];function V({onClose:u,inModal:o=!1}){const[j,S]=n.useState(""),[l,I]=n.useState(""),[x,k]=n.useState({}),[t,i]=n.useState({}),[A,w]=n.useState(!1),[B,T]=n.useState(!1),[R,q]=n.useState(0),[D,L]=n.useState(""),[O,P]=n.useState(!1),$=(s,a)=>{k(r=>({...r,[s]:a}))},z=s=>s<=7?"Ansiedad mínima":s<=15?"Ansiedad leve":s<=25?"Ansiedad moderada":"Ansiedad severa",F=s=>{s.preventDefault();const a=Object.keys(x).length;if(a<m.length){i({responses:`Por favor responde todas las preguntas (${a}/${m.length} completadas)`});return}i({});const p=m.map(v=>x[v.id]||0).reduce((v,G)=>v+G,0),_=z(p);q(p),L(_),T(!0),o&&window.scrollTo({top:0,behavior:"smooth"})},H=async s=>{s.preventDefault();const a={};if(j.trim()||(a.name="El nombre es requerido"),l.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l)||(a.email="El email no es válido"):a.email="El email es requerido",Object.keys(a).length>0){i(a);return}w(!0),i({});try{const r=m.map(p=>x[p.id]||0);await fetch("/api/psychological-tests",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({name:j,email:l,test_type:"beck_anxiety",responses:r})}),P(!0),o&&window.scrollTo({top:0,behavior:"smooth"})}catch{i({submit:"Error al enviar el test. Por favor intenta de nuevo."})}finally{w(!1)}};return O?e.jsxs(f,{className:"mx-auto max-w-2xl",children:[e.jsxs(b,{children:[e.jsx(y,{className:"text-2xl",children:"¡Resultados Enviados!"}),e.jsx(N,{children:"Gracias por completar el Inventario de Ansiedad de Beck (BAI)"})]}),e.jsxs(g,{children:[e.jsx(d,{children:e.jsxs(c,{children:["Los resultados han sido enviados a tu correo electrónico (",l,"). Por favor revisa tu bandeja de entrada."]})}),e.jsx("div",{className:"mt-6",children:e.jsx(h,{onClick:()=>{u?u():window.location.href="/"},className:"w-full",children:o?"Cerrar":"Volver al inicio"})})]})]}):B?e.jsxs(f,{className:"mx-auto max-w-2xl",children:[e.jsxs(b,{children:[e.jsx(y,{className:"text-2xl",children:"Resultados de tu Evaluación"}),e.jsx(N,{children:"Inventario de Ansiedad de Beck (BAI)"})]}),e.jsxs(g,{className:"space-y-6",children:[e.jsx("div",{className:"p-6 rounded-lg bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200",children:e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tu puntuación"}),e.jsxs("p",{className:"text-4xl font-bold text-blue-600",children:[R," puntos"]}),e.jsx("p",{className:"text-lg font-semibold text-gray-800 mt-2",children:D})]})}),e.jsx(d,{children:e.jsx(c,{children:"Este test es una guía inicial. Si el resultado indica ansiedad elevada, te recomendamos agendar una cita para un proceso de evaluación más completo."})}),e.jsx("form",{onSubmit:H,className:"space-y-4",children:e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"¿Deseas recibir tus resultados por email?"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(C,{htmlFor:"name",children:"Nombre completo"}),e.jsx(E,{id:"name",type:"text",value:j,onChange:s=>S(s.target.value),placeholder:"Tu nombre",className:t.name?"border-red-500":""}),t.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.name})]}),e.jsxs("div",{children:[e.jsx(C,{htmlFor:"email",children:"Email"}),e.jsx(E,{id:"email",type:"email",value:l,onChange:s=>I(s.target.value),placeholder:"tu@email.com",className:t.email?"border-red-500":""}),t.email&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.email})]})]}),t.submit&&e.jsx(d,{variant:"destructive",className:"mt-4",children:e.jsx(c,{children:t.submit})}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx(h,{type:"submit",disabled:A,className:"flex-1",children:A?"Enviando...":"Enviar resultados"}),e.jsx(h,{type:"button",variant:"outline",onClick:()=>{u?u():window.location.href="/"},className:"flex-1",children:o?"Cerrar":"No, gracias"})]})]})})]})]}):e.jsxs(f,{className:"mx-auto max-w-4xl",children:[e.jsxs(b,{children:[e.jsx(y,{className:"text-2xl",children:"Inventario de Ansiedad de Beck (BAI)"}),e.jsx(N,{children:"A continuación se presenta una lista de síntomas comunes de la ansiedad. Por favor, lea cuidadosamente cada ítem de la lista e indique cuánto le ha afectado en la última semana incluyendo hoy."})]}),e.jsx(g,{children:e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[e.jsx(d,{children:e.jsx(c,{children:"Durante la última semana, incluyendo hoy, ¿cuánto le ha molestado cada uno de estos síntomas?"})}),e.jsx("div",{className:`space-y-6 ${o?"max-h-96 overflow-y-auto pr-2":""}`,children:m.map((s,a)=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs(C,{className:"text-base font-semibold",children:[a+1,". ",s.text]}),e.jsx("div",{className:"space-y-2",children:Q.map(r=>e.jsxs("label",{className:"flex items-center space-x-3 rounded-lg border p-3 cursor-pointer hover:bg-accent transition-colors",children:[e.jsx("input",{type:"radio",name:`question-${s.id}`,value:r.value,checked:x[s.id]===r.value,onChange:()=>$(s.id,r.value),className:"h-4 w-4"}),e.jsx("span",{children:r.label})]},r.value))})]},s.id))}),t.responses&&e.jsx(d,{variant:"destructive",children:e.jsx(c,{children:t.responses})}),e.jsx(h,{type:"submit",className:"w-full",children:"Evaluar"})]})})]})}function te(){return e.jsxs(K,{children:[e.jsx(J,{title:"Inventario de Ansiedad de Beck (BAI)"}),e.jsx(V,{})]})}export{te as default};
