import{a as n,j as e}from"./app-D5iGuCwC.js";import{B as p}from"./button-D7wWm94x.js";import{C as b,a as f,b as g,c as y,d as N,A as x,e as h}from"./alert-B_w5pb18.js";import{I as q}from"./input-NLRwmVJh.js";import{L as S}from"./label-DwTmQvvU.js";const d=[{id:1,text:"Mi cabeza está llena de preocupaciones y me espero lo peor ante una situación"},{id:2,text:"Me cuesta mucho relajarme, me encuentro en una situación de tensión y me sobresalto con facilidad"},{id:3,text:"Tengo muchos miedos: a la oscuridad, los desconocidos, a quedarme solo/a,..."},{id:4,text:"Me cuesta mucho dormirme y me suelo despertar cansado/a"},{id:5,text:"Me noto deprimido/a la mayor parte del tiempo"},{id:6,text:"Me cuesta mantener la atención y concentrarme"},{id:7,text:"Noto mis músculos en tensión, me duelen e incluso a veces puedo notar cómo se sacuden mis dientes"},{id:8,text:"Percibo una opresión en el pecho, tengo la sensación de que me ahogo y no puedo respirar"},{id:9,text:"Me cuesta tragar, tengo estreñimiento y me cuesta digerir pequeñas cantidades de comida"},{id:10,text:"Tengo la boca seca, sensaciones de vértigo y me duele la cabeza sin razón alguna"}],G=[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"}];function U({onClose:c,inModal:o=!1}){const[j,C]=n.useState(""),[i,T]=n.useState(""),[m,A]=n.useState({}),[t,l]=n.useState({}),[w,E]=n.useState(!1),[R,H]=n.useState(!1),[P,k]=n.useState(0),[D,F]=n.useState(""),[O,$]=n.useState(!1),I=(a,s)=>{A(r=>({...r,[a]:s}))},L=a=>a<18?"Ansiedad ligera":a<25?"Ansiedad leve a moderada":a<30?"Ansiedad moderada a severa":"Ansiedad muy severa",z=a=>{a.preventDefault();const s=Object.keys(m).length;if(s<d.length){l({responses:`Por favor responde todas las preguntas (${s}/${d.length} completadas)`});return}l({});const u=d.map(v=>m[v.id]||1).reduce((v,_)=>v+_,0),B=L(u);k(u),F(B),H(!0),o&&window.scrollTo({top:0,behavior:"smooth"})},Q=async a=>{a.preventDefault();const s={};if(j.trim()||(s.name="El nombre es requerido"),i.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)||(s.email="El email no es válido"):s.email="El email es requerido",Object.keys(s).length>0){l(s);return}E(!0),l({});try{const r=d.map(u=>m[u.id]||1);await fetch("/api/psychological-tests",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({name:j,email:i,test_type:"hamilton_anxiety",responses:r})}),$(!0),o&&window.scrollTo({top:0,behavior:"smooth"})}catch{l({submit:"Error al enviar el test. Por favor intenta de nuevo."})}finally{E(!1)}};return O?e.jsxs(b,{className:"mx-auto max-w-2xl",children:[e.jsxs(f,{children:[e.jsx(g,{className:"text-2xl",children:"¡Resultados Enviados!"}),e.jsx(y,{children:"Gracias por completar el Test de Ansiedad - Hamilton"})]}),e.jsxs(N,{children:[e.jsx(x,{children:e.jsxs(h,{children:["Los resultados han sido enviados a tu correo electrónico (",i,"). Por favor revisa tu bandeja de entrada."]})}),e.jsx("div",{className:"mt-6",children:e.jsx(p,{onClick:()=>{c?c():window.location.href="/"},className:"w-full",children:o?"Cerrar":"Volver al inicio"})})]})]}):R?e.jsxs(b,{className:"mx-auto max-w-2xl",children:[e.jsxs(f,{children:[e.jsx(g,{className:"text-2xl",children:"Resultados de tu Evaluación"}),e.jsx(y,{children:"Test de Ansiedad - Hamilton"})]}),e.jsxs(N,{className:"space-y-6",children:[e.jsx("div",{className:"p-6 rounded-lg bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200",children:e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tu puntuación"}),e.jsxs("p",{className:"text-4xl font-bold text-blue-600",children:[P," puntos"]}),e.jsx("p",{className:"text-lg font-semibold text-gray-800 mt-2",children:D})]})}),e.jsx(x,{children:e.jsx(h,{children:"Este test es una guía inicial. Si el resultado indica ansiedad elevada, te recomendamos agendar una cita para un proceso de evaluación más completo."})}),e.jsx("form",{onSubmit:Q,className:"space-y-4",children:e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"¿Deseas recibir tus resultados por email?"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(S,{htmlFor:"name",children:"Nombre completo"}),e.jsx(q,{id:"name",type:"text",value:j,onChange:a=>C(a.target.value),placeholder:"Tu nombre",className:t.name?"border-red-500":""}),t.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.name})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"email",children:"Email"}),e.jsx(q,{id:"email",type:"email",value:i,onChange:a=>T(a.target.value),placeholder:"tu@email.com",className:t.email?"border-red-500":""}),t.email&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.email})]})]}),t.submit&&e.jsx(x,{variant:"destructive",className:"mt-4",children:e.jsx(h,{children:t.submit})}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx(p,{type:"submit",disabled:w,className:"flex-1",children:w?"Enviando...":"Enviar resultados"}),e.jsx(p,{type:"button",variant:"outline",onClick:()=>{c?c():window.location.href="/"},className:"flex-1",children:o?"Cerrar":"No, gracias"})]})]})})]})]}):e.jsxs(b,{className:"mx-auto max-w-4xl",children:[e.jsxs(f,{children:[e.jsx(g,{className:"text-2xl",children:"Test de Ansiedad - Hamilton"}),e.jsx(y,{children:e.jsxs(e.Fragment,{children:["Como psicóloga clínica, veo a diario cómo el ritmo de nuestra sociedad nos exige, a menudo, más de lo que sentimos poder gestionar. ¿Sientes que el estrés diario te está sobrepasando? Quiero que sepas que no estás solo/a en esto.",e.jsx("br",{}),e.jsx("br",{}),"Reconocer que el nerviosismo está afectando tu bienestar emocional es, sin duda, el primer paso y el más valiente para recuperar tu calma. Por eso, para acompañarte en este proceso de autoconocimiento, he preparado para ti esta versión breve del Test de Hamilton, una herramienta fundamental para identificar indicadores de ansiedad.",e.jsx("br",{}),e.jsx("br",{}),"Recuerda que este test es una guía inicial. Si el resultado indica ansiedad elevada, por favor, agenda una cita y juntos empecemos tu proceso de sanación emocional.",e.jsx("br",{}),e.jsx("br",{}),"Por favor, responde a todas las preguntas seleccionando un número del 1 al 5 según tu estado durante la última semana."]})})]}),e.jsxs(N,{children:[!o&&e.jsxs("div",{className:"mb-6 space-y-4 text-base leading-relaxed text-gray-700",children:[e.jsx("p",{children:"Como psicóloga clínica, veo a diario cómo el ritmo de nuestra sociedad nos exige, a menudo, más de lo que sentimos poder gestionar. ¿Sientes que el estrés diario te está sobrepasando? Quiero que sepas que no estás solo/a en esto."}),e.jsx("p",{children:"Reconocer que el nerviosismo está afectando tu bienestar emocional es, sin duda, el primer paso y el más valiente para recuperar tu calma. Por eso, para acompañarte en este proceso de autoconocimiento, he preparado para ti esta versión breve del Test de Hamilton, una herramienta fundamental para identificar indicadores de ansiedad."}),e.jsx("p",{children:"Recuerda que este test es una guía inicial. Si el resultado indica ansiedad elevada, por favor, agenda una cita y juntos empecemos tu proceso de sanación emocional."})]}),e.jsxs("form",{onSubmit:z,className:"space-y-6",children:[e.jsx("div",{className:`space-y-6 ${o?"max-h-96 overflow-y-auto pr-2":""}`,children:d.map((a,s)=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs(S,{className:"text-base font-semibold",children:[s+1,". ",a.text]}),e.jsx("div",{className:"space-y-2",children:G.map(r=>e.jsxs("label",{className:"flex items-center space-x-3 rounded-lg border p-3 cursor-pointer hover:bg-accent transition-colors",children:[e.jsx("input",{type:"radio",name:`question-${a.id}`,value:r.value,checked:m[a.id]===r.value,onChange:()=>I(a.id,r.value),className:"h-4 w-4"}),e.jsx("span",{children:r.label})]},r.value))})]},a.id))}),t.responses&&e.jsx(x,{variant:"destructive",children:e.jsx(h,{children:t.responses})}),e.jsx(p,{type:"submit",className:"w-full",children:"Evaluar"})]})]})]})}export{U as H};
